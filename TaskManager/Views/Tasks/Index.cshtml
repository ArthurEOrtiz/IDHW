@{
  Layout = "_Layout";
  ViewData["Title"] = "Tasks";
}

@model IEnumerable<TaskManager.Models.UserTask>

<div class="container ">
  <h2>Tasks</h2>

  <div class="spinner-border text-primary" 
       role="status" 
       id="loadingSpinner">

    <span class="visually-hidden">Loading...</span>
  </div>

  <div class="d-flex justify-content-center">
    <div id="tasksTable" 
         style="display: none;">
 
        <table class="table table-striped table-hover"
               style="width: auto;">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Is Completed</th>
              <th scope="col">Due Date</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rendered by `renderTable` in index.js -->
          </tbody>
        </table>


      <button type="button"
              class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#createTaskModal"
              aria-label="Create New Task">
        Create New Task
      </button>
    </div>
  </div>
</div>

<!-- Create Modal  -->
@await Html.PartialAsync("_CreateTaskModal")

<!-- Edit Modal -->
<div id="editModalContainer"></div>

<!-- Confirmation Modal -->
@await Html.PartialAsync("_ConfirmationModal")

<!-- Scripts -->  
<script>
  // Defining urls for the `renderTable` in index.js
  window.getTasksUrl = '@Url.Action("GetTasks", "Tasks")';
  window.detailsUrl = '@Url.Action("Details", "Tasks")';
</script>

@section Scripts {
  <script src="~/js/tasks/index.js"></script>
  <script src="~/js/shared/taskForm.js"></script>
}



